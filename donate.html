<!DOCTYPE html>
<html>
<head>
    <title>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ù–æ—Ä–º–∏–∫ –ß–µ–ª–∞</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'">
    <noscript><meta http-equiv="refresh" content="0; url=https://normik-chel.github.io"></noscript>
    <style>body{font-family:Arial,sans-serif;text-align:center;padding:50px}input,button{padding:10px;margin:10px;font-size:16px}</style>
</head>
<body>
    <h1>–ó–∞–∫–∏–Ω—å –±—Ä–∞—Ç—é–Ω–µ –Ω–∞ –ø–µ—á–µ–Ω—å–∫–∏! üç™</h1>
    <form id="dForm">
        <input type="text" id="name" placeholder="–¢–≤–æ–µ –∏–º—è" required>
        <input type="number" id="amt" placeholder="–°—É–º–º–∞ (—Ä—É–±)" min="1" required oninput="this.value=this.value.replace(/[^0-9]/g,'')">
        <input type="text" id="msg" placeholder="–¢–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" maxlength="50">
        <br>
        <button type="submit">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å!</button>
    </form>
    <p id="msgEl"></p>

    <script>
        !function(){
            // –ê–Ω—Ç–∏-dev –∑–∞—â–∏—Ç–∞
            if(window.self !== window.top || window.location.hostname !== 'normik-chel.github.io') {
                window.location.href = 'https://normik-chel.github.io';
                return;
            }
            
            // –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('keydown', function(e) {
                if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73) || 
                   (e.ctrlKey && e.keyCode == 85)) {
                    e.preventDefault();
                    return false;
                }
            });
            
            // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
            document.getElementById('dForm').addEventListener('submit', function(e) {
                e.preventDefault();
                var name = document.getElementById('name').value;
                var amount = document.getElementById('amt').value;
                var message = document.getElementById('msg').value || '–î–æ–Ω–∞—Ç –æ—Ç –∞–Ω–æ–Ω–∏–º–∞';
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º
                var donationData = {
                    name: name,
                    amount: amount,
                    message: message,
                    timestamp: Date.now(),
                    status: 'pending'
                };
                
                localStorage.setItem('lastDonation', JSON.stringify(donationData));
                localStorage.setItem('donationAmount', amount); // –û—Ç–¥–µ–ª—å–Ω–æ —Å—É–º–º—É –¥–ª—è success.html
                
                var authUrl = new URL('https://yoomoney.ru/oauth/authorize');
                authUrl.searchParams.append('client_id', '6F6E7CF4814C90EBF49DC5379FAA8BFC83712673EB19B1E7A2149F880053AB91');
                authUrl.searchParams.append('response_type', 'code');
                authUrl.searchParams.append('redirect_uri', 'https://normik-chel.github.io/success.html');
                authUrl.searchParams.append('scope', 'payment.to-account("4100118296048272").limit(,' + amount + ')');
                authUrl.searchParams.append('state', name + '||' + message);
                
                window.location.href = authUrl.toString();
            });
        }();
    </script>
</body>
</html>
